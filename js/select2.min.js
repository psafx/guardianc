(function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var s=e([0]),i=-1,n=this.length;n>++i&&(s.context=s[0]=this[i])&&t.call(s[0],i,s)!==!1;);return this}})})(jQuery),function(e,t){"use strict";function s(e,s){var i,n=0,o=s.length;if(e===t)return-1;if(e.constructor===String){for(;o>n;n+=1)if(0===e.localeCompare(s[n]))return n}else for(;o>n;n+=1)if(i=s[n],i.constructor===String){if(0===i.localeCompare(e))return n}else if(i===e)return n;return-1}function i(e,s){return e===s?!0:e===t||s===t?!1:null===e||null===s?!1:e.constructor===String?0===e.localeCompare(s):s.constructor===String?0===s.localeCompare(e):!1}function n(t,s){var i,n,o;if(null===t||1>t.length)return[];for(i=t.split(s),n=0,o=i.length;o>n;n+=1)i[n]=e.trim(i[n]);return i}function o(e){return e.outerWidth(!1)-e.width()}function a(s){var i="keyup-change-value";s.bind("keydown",function(){e.data(s,i)===t&&e.data(s,i,s.val())}),s.bind("keyup",function(){var n=e.data(s,i);n!==t&&s.val()!==n&&(e.removeData(s,i),s.trigger("keyup-change"))})}function l(s){s.bind("mousemove",function(s){var i=I;(i===t||i.x!==s.pageX||i.y!==s.pageY)&&e(s.target).trigger("mousemove-filtered",s)})}function c(e,s,i){i=i||t;var n;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function r(e){var t,s=!1;return function(){return s===!1&&(t=e(),s=!0),t}}function h(e,t){var i=c(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){s(e.target,t.get())>=0&&i(e)})}function d(e){e.preventDefault(),e.stopPropagation()}function u(e){e.preventDefault(),e.stopImmediatePropagation()}function p(t){if(!A){var s=t[0].currentStyle||window.getComputedStyle(t[0],null);A=e("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"}),e("body").append(A)}return A.text(t.val()),A.width()}function f(e,s,i){var n=e.toUpperCase().indexOf(s.toUpperCase()),o=s.length;return 0>n?(i.push(e),t):(i.push(e.substring(0,n)),i.push("<span class='select2-match'>"),i.push(e.substring(n,n+o)),i.push("</span>"),i.push(e.substring(n+o,e.length)),t)}function g(t){var s,i=0,n=null,o=t.quietMillis||100;return function(a){window.clearTimeout(s),s=window.setTimeout(function(){i+=1;var s=i,o=t.data,l=t.transport||e.ajax,c=t.traditional||!1,r=t.type||"GET";o=o.call(this,a.term,a.page,a.context),null!==n&&n.abort(),n=l.call(null,{url:t.url,dataType:t.dataType,data:o,type:r,traditional:c,success:function(e){if(!(i>s)){var n=t.results(e,a.page);a.callback(n)}}})},o)}}function m(s){var i,n=s,o=function(e){return""+e.text};return e.isArray(n)||(o=n.text,e.isFunction(o)||(i=n.text,o=function(e){return e[i]}),n=n.results),function(s){var i,a=s.term,l={results:[]};return""===a?(s.callback({results:n}),t):(i=function(t,n){var l,c;if(t=t[0],t.children){l={};for(c in t)t.hasOwnProperty(c)&&(l[c]=t[c]);l.children=[],e(t.children).each2(function(e,t){i(t,l.children)}),(l.children.length||s.matcher(a,o(l)))&&n.push(l)}else s.matcher(a,o(t))&&n.push(t)},e(n).each2(function(e,t){i(t,l.results)}),s.callback(l),t)}}function v(s){return e.isFunction(s)?s:function(i){var n=i.term,o={results:[]};e(s).each(function(){var e=this.text!==t,s=e?this.text:this;(""===n||i.matcher(n,s))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function b(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function w(t){return e.isFunction(t)?t():t}function C(t){var s=0;return e.each(t,function(e,t){t.children?s+=C(t.children):s++}),s}function S(e,s,n,o){var a,l,c,r,h,d=e,u=!1;if(!o.createSearchChoice||!o.tokenSeparators||1>o.tokenSeparators.length)return t;for(;;){for(l=-1,c=0,r=o.tokenSeparators.length;r>c&&(h=o.tokenSeparators[c],l=e.indexOf(h),!(l>=0));c++);if(0>l)break;if(a=e.substring(0,l),e=e.substring(l+h.length),a.length>0&&(a=o.createSearchChoice(a,s),a!==t&&null!==a&&o.id(a)!==t&&null!==o.id(a))){for(u=!1,c=0,r=s.length;r>c;c++)if(i(o.id(a),o.id(s[c]))){u=!0;break}u||n(a)}}return 0!=d.localeCompare(e)?e:t}function y(t,s){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}if(window.Select2===t){var x,T,E,P,k,A,I,O;x={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case x.LEFT:case x.RIGHT:case x.UP:case x.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case x.SHIFT:case x.CTRL:case x.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},O=e(document),k=function(){var e=1;return function(){return e++}}(),O.bind("mousemove",function(e){I={x:e.pageX,y:e.pageY}}),O.ready(function(){O.bind("mousedown touchend",function(s){var i,n=e(s.target).closest("div.select2-container").get(0);n?O.find("div.select2-container-active").each(function(){this!==n&&e(this).data("select2").blur()}):(n=e(s.target).closest("div.select2-drop").get(0),O.find("div.select2-drop-active").each(function(){this!==n&&e(this).data("select2").blur()})),n=e(s.target),i=n.attr("for"),"LABEL"===s.target.tagName&&i&&i.length>0&&(i=i.replace(/([\[\].])/g,"\\$1"),n=e("#"+i),n=n.data("select2"),n!==t&&(n.focus(),s.preventDefault()))})}),T=y(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(s){var i,n,o=".select2-results";this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==t&&null!==s.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+k()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=r(function(){return s.element.closest("body")}),s.element.attr("class")!==t&&this.container.addClass(s.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(w(s.containerCss)),this.container.addClass(w(s.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(w(s.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(o),this.search=n=this.container.find("input.select2-input"),n.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),l(this.results),this.dropdown.delegate(o,"mousemove-filtered",this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.delegate(o,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&i.mousewheel(function(e,t,s,n){var o=i.scrollTop();n>0&&0>=o-n?(i.scrollTop(0),d(e)):0>n&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),d(e))}),a(n),n.bind("keyup-change",this.bind(this.updateResults)),n.bind("focus",function(){n.addClass("select2-focused")," "===n.val()&&n.val("")}),n.bind("blur",function(){n.removeClass("select2-focused")}),this.dropdown.delegate(o,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(t),this.selectHighlighted(t)):this.focusSearch(),d(t)})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(s.element.is(":disabled")||s.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(s){var o,a,l,c;if(o=s.element,"select"===o.get(0).tagName.toLowerCase()&&(this.select=a=s.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),s=e.extend({},{populateResults:function(i,n,o){var a,l=this.opts.id,c=this;a=function(i,n,r){var h,d,u,p,f,g,m,v,b;for(h=0,d=i.length;d>h;h+=1)u=i[h],p=l(u)!==t,f=u.children&&u.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+r),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(u)),m=e("<div></div>"),m.addClass("select2-result-label"),b=s.formatResult(u,m,o),b!==t&&m.html(c.opts.escapeMarkup(b)),g.append(m),f&&(v=e("<ul></ul>"),v.addClass("select2-result-sub"),a(u.children,v,r+1),g.append(v)),g.data("select2-data",u),n.append(g)},a(n,i,0)}},e.fn.select2.defaults,s),"function"!=typeof s.id&&(l=s.id,s.id=function(e){return e[l]}),a?(s.query=this.bind(function(s){var i,n,a,l={results:[],more:!1},c=s.term;a=function(e,t){var i;e.is("option")?s.matcher(c,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class")}):e.is("optgroup")&&(i={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){a(t,i.children)}),i.children.length>0&&t.push(i))},i=o.children(),this.getPlaceholder()!==t&&i.length>0&&(n=i[0],""===e(n).text()&&(i=i.not(n))),i.each2(function(e,t){a(t,l.results)}),s.callback(l)}),s.id=function(e){return e.id},s.formatResultCssClass=function(e){return e.css}):"query"in s||("ajax"in s?(c=s.element.data("ajax-url"),c&&c.length>0&&(s.ajax.url=c),s.query=g(s.ajax)):"data"in s?s.query=m(s.data):"tags"in s&&(s.query=v(s.tags),s.createSearchChoice===t&&(s.createSearchChoice=function(e){return{id:e,text:e}}),s.initSelection=function(o,a){var l=[];e(n(o.val(),s.separator)).each(function(){var n=this,o=this,a=s.tags;e.isFunction(a)&&(a=a()),e(a).each(function(){return i(this.id,n)?(o=this.text,!1):t}),l.push({id:n,text:o})}),a(l)})),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,s,i,n=this.container.offset(),o=this.container.outerHeight(!1),a=this.container.outerWidth(!1),l=this.dropdown.outerHeight(!1),c=e(window).scrollLeft()+document.documentElement.clientWidth,r=e(window).scrollTop()+document.documentElement.clientHeight,h=n.top+o,d=n.left,u=r>=h+l,p=n.top-l>=this.body().scrollTop(),f=this.dropdown.outerWidth(!1),g=c>=d+f,m=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,d-=t.left),m?(s=!0,!p&&u&&(s=!1)):(s=!1,!u&&p&&(s=!0)),g||(d=n.left+a-f),s?(h=n.top-l,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=e.extend({top:h,left:d,width:a},w(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("open"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var t=this.containerId,s=this.containerSelector,i="scroll."+t,n="resize."+t;this.container.parents().each(function(){e(this).bind(i,function(){var t=e(s);0==t.length&&e(this).unbind(i),t.select2("close")})}),window.setTimeout(function(){e(window).bind(n,function(){var t=e(s);0==t.length&&e(window).unbind(n),t.select2("close")})},10),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var t=this;this.container.parents().each(function(){e(this).unbind("scroll."+t.containerId)}),e(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var s,i,n,o,a,l,c,r=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return r.scrollTop(0),t;s=r.find(".select2-result-selectable"),n=e(s[i]),o=n.offset().top+n.outerHeight(!0),i===s.length-1&&(c=r.find("li.select2-more-results"),c.length>0&&(o=c.offset().top+c.outerHeight(!0))),a=r.offset().top+r.outerHeight(!0),o>a&&r.scrollTop(r.scrollTop()+(o-a)),l=n.offset().top-r.offset().top,0>l&&"none"!=n.css("display")&&r.scrollTop(r.scrollTop()+l)}},moveHighlight:function(t){for(var s=this.results.find(".select2-result-selectable"),i=this.highlight();i>-1&&s.length>i;){i+=t;var n=e(s[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")){this.highlight(i);break}}},highlight:function(i){var n=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?s(n.filter(".select2-highlighted")[0],n.get()):(i>=n.length&&(i=n.length-1),0>i&&(i=0),n.removeClass("select2-highlighted"),e(n[i]).addClass("select2-highlighted"),this.ensureHighlightVisible(),t)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(t){var s=e(t.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.results.find(".select2-result-selectable");this.highlight(i.index(s))}else 0==s.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,s=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,o=this.search.val(),a=this.context;0!==s.length&&(e=s.offset().top-t.offset().top-t.height(),0>=e&&(s.addClass("select2-active"),this.opts.query({term:o,page:i,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:a}),e.more===!0?(s.detach().appendTo(t).text(n.opts.formatLoadMore(i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i)})})))},tokenize:function(){},updateResults:function(s){function n(){r.scrollTop(0),c.removeClass("select2-active"),d.positionDropdown()}function o(e){r.html(d.opts.escapeMarkup(e)),n()}var a,l,c=this.search,r=this.results,h=this.opts,d=this;if(s===!0||this.showSearchInput!==!1&&this.opened()){if(c.addClass("select2-active"),h.maximumSelectionSize>=1&&(a=this.data(),e.isArray(a)&&a.length>=h.maximumSelectionSize&&b(h.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(h.maximumSelectionSize)+"</li>"),t;if(c.val().length<h.minimumInputLength)return b(h.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+h.formatInputTooShort(c.val(),h.minimumInputLength)+"</li>"):o(""),t;h.formatSearching()&&o("<li class='select2-searching'>"+h.formatSearching()+"</li>"),l=this.tokenize(),l!=t&&null!=l&&c.val(l),this.resultsPage=1,h.query({term:c.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(a){var l;if(this.opened()){if(this.context=a.context===t?null:a.context,this.opts.createSearchChoice&&""!==c.val()&&(l=this.opts.createSearchChoice.call(null,c.val(),a.results),l!==t&&null!==l&&d.id(l)!==t&&null!==d.id(l)&&0===e(a.results).filter(function(){return i(d.id(this),d.id(l))}).length&&a.results.unshift(l)),0===a.results.length&&b(h.formatNoMatches,"formatNoMatches"))return o("<li class='select2-no-results'>"+h.formatNoMatches(c.val())+"</li>"),t;r.empty(),d.opts.populateResults.call(this,r,a.results,{term:c.val(),page:this.resultsPage,context:null}),a.more===!0&&b(h.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+d.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(a,s),n()}})})}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.element.triggerHandler("blur")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var e=this.highlight(),t=this.results.find(".select2-highlighted").not(".select2-disabled"),s=t.closest(".select2-result-selectable").data("select2-data");s&&(t.addClass("select2-disabled"),this.highlight(e),this.onSelect(s))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function s(){var s,i,n,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(s=this.opts.element.attr("style"),s!==t)for(i=s.split(";"),o=0,a=i.length;a>o;o+=1)if(n=i[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width"),s.indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=s.call(this);null!==i&&this.container.attr("style","width: "+i)}}),E=y(T,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var e,s=this.container,i=this.dropdown,n=!1;this.selection=e=s.find(".select2-choice"),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===x.PAGE_UP||e.which===x.PAGE_DOWN)return d(e),t;if(this.opened())switch(e.which){case x.UP:case x.DOWN:return this.moveHighlight(e.which===x.UP?-1:1),d(e),t;case x.TAB:case x.ENTER:return this.selectHighlighted(),d(e),t;case x.ESC:return this.cancel(e),d(e),t}else{if(e.which===x.TAB||x.isControl(e)||x.isFunctionKey(e)||e.which===x.ESC)return;if(this.opts.openOnEnter===!1&&e.which===x.ENTER)return;if(this.open(),e.which===x.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){var e=this.opts.element.attr("tabIndex");e?this.selection.attr("tabIndex",e):this.selection.removeAttr("tabIndex")}),10)})),e.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),u(e),this.close(),this.triggerChange(),this.selection.focus())})),e.bind("mousedown",this.bind(function(){n=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),n=!1})),i.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),e.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("keydown",this.bind(function(e){return this.enabled?e.which==x.DOWN||e.which==x.UP||e.which==x.ENTER&&this.opts.openOnEnter?(this.open(),d(e),t):e.which==x.DELETE||e.which==x.BACKSPACE?(this.opts.allowClear&&this.clear(),d(e),t):t:t})),e.bind("keypress",this.bind(function(e){var t=String.fromCharCode(e.which);this.search.val(t),this.open()})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,s){var i=t.find(":selected");e.isFunction(s)&&s({id:i.attr("value"),text:i.text(),element:i})}),t},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(s,n){var o=0,a=this,l=!0;this.results.find(".select2-result-selectable").each2(function(e,s){return i(a.id(s.data("select2-data")),a.opts.element.val())?(o=e,!1):t}),this.highlight(o),n===!0&&(l=this.showSearchInput=C(s.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[l?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[l?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),i(t,this.id(e))||this.triggerChange()},updateSelection:function(e){var s,i=this.selection.find("span");this.selection.data("select2-data",e),i.empty(),s=this.opts.formatSelection(e,i),s!==t&&i.append(this.opts.escapeMarkup(s)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,s=null,i=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],this.select)this.select.val(e).find(":selected").each2(function(e,t){return s={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(s),this.setPlaceholder(),this.triggerChange();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e)return this.clear(),this.triggerChange(),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),i.triggerChange()})}},clearSearch:function(){this.search.val("")},data:function(e){var s;return 0===arguments.length?(s=this.selection.data("select2-data"),s==t&&(s=null),s):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),P=y(T,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,s){var i=[];t.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text(),element:t})}),e.isFunction(s)&&s(i)}),t},initContainer:function(){var s,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=s=this.container.find(i),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===x.BACKSPACE&&""===this.search.val()){this.close();var i,n=s.find(".select2-search-choice-focus");if(n.length>0)return this.unselect(n.first()),this.search.width(10),d(e),t;i=s.find(".select2-search-choice:not(.select2-locked)"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else s.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case x.UP:case x.DOWN:return this.moveHighlight(e.which===x.UP?-1:1),d(e),t;case x.ENTER:case x.TAB:return this.selectHighlighted(),d(e),t;case x.ESC:return this.cancel(e),d(e),t}e.which===x.TAB||x.isControl(e)||x.isFunctionKey(e)||e.which===x.BACKSPACE||e.which===x.ESC||(this.opts.openOnEnter!==!1||e.which!==x.ENTER)&&(this.open(),(e.which===x.PAGE_UP||e.which===x.PAGE_DOWN)&&d(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],n=[],o=this;e(t).each(function(){0>s(o.id(this),i)&&(i.push(o.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e){this.addSelectedChoice(e),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:e}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n=!s.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=n?o:a,c=this.id(s),r=this.getVal();i=this.opts.formatSelection(s,l.find("div")),i!=t&&l.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),n&&l.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),d(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",s),l.insertBefore(this.searchContainer),r.push(c),this.setVal(r)},unselect:function(e){var t,i,n=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),i=s(this.id(t),n),i>=0&&(n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:t})},postprocessResults:function(){var e=this.getVal(),i=this.results.find(".select2-result-selectable"),n=this.results.find(".select2-result-with-children"),o=this;i.each2(function(t,i){var n=o.id(i.data("select2-data"));s(n,e)>=0?i.addClass("select2-disabled").removeClass("select2-result-selectable"):i.removeClass("select2-disabled").addClass("select2-result-selectable")}),n.each2(function(e,t){t.is(".select2-result-selectable")||0!=t.find(".select2-result-selectable").length?t.removeClass("select2-disabled"):t.addClass("select2-disabled")}),-1==this.highlight()&&i.each2(function(e,s){return!s.hasClass("select2-disabled")&&s.hasClass("select2-result-selectable")?(o.highlight(0),!1):t})},resizeSearch:function(){var e,t,s,i,n,a=o(this.search);
e=p(this.search)+10,t=this.search.offset().left,s=this.selection.width(),i=this.selection.offset().left,n=s-(t-i)-a,e>n&&(n=s-a),40>n&&(n=s-a),this.search.width(n)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),n(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){0>s(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var s,i=[],n=this;if(0===arguments.length)return this.getVal();if(s=arguments[0],!s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),this.triggerChange(),t;if(this.setVal(s),this.select)this.select.find(":selected").each(function(){i.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(i),this.triggerChange();else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e(t).map(n.id);n.setVal(s),n.updateSelection(t),n.clearSearch(),n.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(s){var i,n=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s||(s=[]),i=e.map(s,function(e){return n.opts.id(e)}),this.setVal(i),this.updateSelection(s),this.clearSearch(),t)}}),e.fn.select2=function(){var i,n,o,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.attr("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new P:new E,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(0>s(l[0],c))throw"Unknown method: "+l[0];if(o=t,n=e(this).data("select2"),n===t)return;if(o="container"===l[0]?n.container:n[l[0]].apply(n,l.slice(1)),o!==t)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s){var i=[];return f(e.text,s.term,i),i.join("")},formatSelection:function(e){return e?e.text:t},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var s=t-e.length;return"Please enter "+s+" more character"+(1==s?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;"):e},blurOnChange:!1},window.Select2={query:{ajax:g,local:m,tags:v},util:{debounce:c,markMatch:f},"class":{"abstract":T,single:E,multi:P}}}}(jQuery);