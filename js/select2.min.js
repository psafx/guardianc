(function(e){if(typeof e.fn.each2=="undefined"){e.fn.extend({each2:function(t){var i=e([0]),s=-1,n=this.length;while(++s<n&&(i.context=i[0]=this[s])&&t.call(i[0],s,i)!==false);return this}})}})(jQuery);(function(e,t){"use strict";if(window.Select2!==t){return}var i,s,n,r,l,a,o,c;i={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case i.LEFT:case i.RIGHT:case i.UP:case i.DOWN:return true}return false},isControl:function(e){var t=e.which;switch(t){case i.SHIFT:case i.CTRL:case i.ALT:return true}if(e.metaKey)return true;return false},isFunctionKey:function(e){e=e.which?e.which:e;return e>=112&&e<=123}};c=e(document);l=function(){var e=1;return function(){return e++}}();function h(e,t){var i=0,s=t.length;for(;i<s;i=i+1)if(e===t[i])return i;return-1}function u(e,t){return e===t}function d(t,i){var s,n,r;if(t===null||t.length<1)return[];s=t.split(i);for(n=0,r=s.length;n<r;n=n+1)s[n]=e.trim(s[n]);return s}function f(e){return e.outerWidth(false)-e.width()}function p(i){var s="keyup-change-value";i.bind("keydown",function(){if(e.data(i,s)===t){e.data(i,s,i.val())}});i.bind("keyup",function(){var n=e.data(i,s);if(n!==t&&i.val()!==n){e.removeData(i,s);i.trigger("keyup-change")}})}c.bind("mousemove",function(e){o={x:e.pageX,y:e.pageY}});function g(i){i.bind("mousemove",function(i){var s=o;if(s===t||s.x!==i.pageX||s.y!==i.pageY){e(i.target).trigger("mousemove-filtered",i)}})}function m(e,i,s){s=s||t;var n;return function(){var t=arguments;window.clearTimeout(n);n=window.setTimeout(function(){i.apply(s,t)},e)}}function v(e){var t=false,i;return function(){if(t===false){i=e();t=true}return i}}function b(e,t){var i=m(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){if(h(e.target,t.get())>=0)i(e)})}function w(e){e.preventDefault();e.stopPropagation()}function C(e){e.preventDefault();e.stopImmediatePropagation()}function S(t){if(!a){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});a.attr("class","select2-sizer");e("body").append(a)}a.text(t.val());return a.width()}function y(e,t,i,s){var n=e.toUpperCase().indexOf(t.toUpperCase()),r=t.length;if(n<0){i.push(s(e));return}i.push(s(e.substring(0,n)));i.push("<span class='select2-match'>");i.push(s(e.substring(n,n+r)));i.push("</span>");i.push(s(e.substring(n+r,e.length)))}function x(t){var i,s=0,n=null,r=t.quietMillis||100;return function(l){window.clearTimeout(i);i=window.setTimeout(function(){s+=1;var i=s,r=t.data,a=t.url,o=t.transport||e.ajax,c=t.traditional||false,h=t.type||"GET";r=r?r.call(this,l.term,l.page,l.context):null;a=typeof a==="function"?a.call(this,l.term,l.page,l.context):a;if(null!==n){n.abort()}n=o.call(null,{url:a,dataType:t.dataType,data:r,type:h,cache:false,traditional:c,success:function(e){if(i<s){return}var n=t.results(e,l.page);l.callback(n)}})},r)}}function T(t){var i=t,s,n=function(e){return""+e.text};if(!e.isArray(i)){n=i.text;if(!e.isFunction(n)){s=i.text;n=function(e){return e[s]}}i=i.results}return function(t){var s=t.term,r={results:[]},l;if(s===""){t.callback({results:i});return}l=function(i,r){var a,o;i=i[0];if(i.children){a={};for(o in i){if(i.hasOwnProperty(o))a[o]=i[o]}a.children=[];e(i.children).each2(function(e,t){l(t,a.children)});if(a.children.length||t.matcher(s,n(a),i)){r.push(a)}}else{if(t.matcher(s,n(i),i)){r.push(i)}}};e(i).each2(function(e,t){l(t,r.results)});t.callback(r)}}function E(i){var s=e.isFunction(i);return function(n){var r=n.term,l={results:[]};e(s?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;if(r===""||n.matcher(r,i)){l.results.push(e?this:{id:this,text:this})}});n.callback(l)}}function P(t,i){if(e.isFunction(t))return true;if(!t)return false;throw new Error("formatterName must be a function or a falsy value")}function k(t){return e.isFunction(t)?t():t}function I(t){var i=0;e.each(t,function(e,t){if(t.children){i+=I(t.children)}else{i++}});return i}function O(e,i,s,n){var r=e,l=false,a,o,c,h,d;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return t;while(true){o=-1;for(c=0,h=n.tokenSeparators.length;c<h;c++){d=n.tokenSeparators[c];o=e.indexOf(d);if(o>=0)break}if(o<0)break;a=e.substring(0,o);e=e.substring(o+d.length);if(a.length>0){a=n.createSearchChoice(a,i);if(a!==t&&a!==null&&n.id(a)!==t&&n.id(a)!==null){l=false;for(c=0,h=i.length;c<h;c++){if(u(n.id(a),n.id(i[c]))){l=true;break}}if(!l)s(a)}}}if(r!==e)return e}function A(t,i){var s=function(){};s.prototype=new t;s.prototype.constructor=s;s.prototype.parent=t.prototype;s.prototype=e.extend(s.prototype,i);return s}s=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var s,n,r=".select2-results",a;this.opts=i=this.prepareOpts(i);this.id=i.id;if(i.element.data("select2")!==t&&i.element.data("select2")!==null){this.destroy()}this.enabled=true;this.container=this.createContainer();this.containerId="s2id_"+(i.element.attr("id")||"autogen"+l());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=v(function(){return i.element.closest("body")});a=e("#select2-drop-mask");if(a.length==0){a=e(document.createElement("div"));a.attr("id","select2-drop-mask").attr("class","select2-drop-mask");a.hide();a.appendTo(this.body());a.bind("mousedown touchstart",function(t){var i=e("#select2-drop"),s;if(i.length>0){s=i.data("select2");if(s.opts.selectOnBlur){s.selectHighlighted({noFocus:true})}s.close()}})}if(i.element.attr("class")!==t){this.container.addClass(i.element.attr("class").replace(/validate\[[\S ]+] ?/,""))}this.container.css(k(i.containerCss));this.container.addClass(k(i.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabIndex");this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(k(i.dropdownCssClass));this.dropdown.data("select2",this);this.results=s=this.container.find(r);this.search=n=this.container.find("input.select2-input");n.attr("tabIndex",this.elementTabIndex);this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();g(this.results);this.dropdown.delegate(r,"mousemove-filtered",this.bind(this.highlightUnderEvent));b(80,this.results);this.dropdown.delegate(r,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if(e.fn.mousewheel){s.mousewheel(function(e,t,i,n){var r=s.scrollTop(),l;if(n>0&&r-n<=0){s.scrollTop(0);w(e)}else if(n<0&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()){s.scrollTop(s.get(0).scrollHeight-s.height());w(e)}})}p(n);n.bind("keyup-change",this.bind(this.updateResults));n.bind("focus",function(){n.addClass("select2-focused");if(n.val()===" ")n.val("")});n.bind("blur",function(){n.removeClass("select2-focused")});this.dropdown.delegate(r,"mouseup",this.bind(function(t){if(e(t.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(t);this.selectHighlighted(t)}else{this.focusSearch()}w(t)}));this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()});if(e.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))this.disable()},destroy:function(){var e=this.opts.element.data("select2");if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(e!==t){e.container.remove();e.dropdown.remove();e.opts.element.removeData("select2").unbind(".select2").attr("tabIndex",this.elementTabIndex).show()}},prepareOpts:function(i){var s,n,r,l;s=i.element;if(s.get(0).tagName.toLowerCase()==="select"){this.select=n=i.element}if(n){e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}i=e.extend({},{populateResults:function(s,n,r){var l,a,o,c,h=this.opts.id,u=this;l=function(s,n,a){var o,c,d,f,p,g,m,v,b,w;s=i.sortResults(s,n,r);for(o=0,c=s.length;o<c;o=o+1){d=s[o];p=d.disabled===true;f=!p&&h(d)!==t;g=d.children&&d.children.length>0;m=e("<li></li>");m.addClass("select2-results-dept-"+a);m.addClass("select2-result");m.addClass(f?"select2-result-selectable":"select2-result-unselectable");if(p){m.addClass("select2-disabled")}if(g){m.addClass("select2-result-with-children")}m.addClass(u.opts.formatResultCssClass(d));v=e(document.createElement("div"));v.addClass("select2-result-label");w=i.formatResult(d,v,r,u.opts.escapeMarkup);if(w!==t){v.html(w)}m.append(v);if(g){b=e("<ul></ul>");b.addClass("select2-result-sub");l(d.children,b,a+1);m.append(b)}m.data("select2-data",d);n.append(m)}};l(n,s,0)}},e.fn.select2.defaults,i);if(typeof i.id!=="function"){r=i.id;i.id=function(e){return e[r]}}if(e.isArray(i.element.data("select2Tags"))){if("tags"in i){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id")}i.tags=i.element.attr("data-select2-tags")}if(n){i.query=this.bind(function(i){var n={results:[],more:false},r=i.term,l,a,o;o=function(e,t){var s;if(e.is("option")){if(i.matcher(r,e.text(),e)){t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:u(e.attr("disabled"),"disabled")})}}else if(e.is("optgroup")){s={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")};e.children().each2(function(e,t){o(t,s.children)});if(s.children.length>0){t.push(s)}}};l=s.children();if(this.getPlaceholder()!==t&&l.length>0){a=l[0];if(e(a).text()===""){l=l.not(a)}}l.each2(function(e,t){o(t,n.results)});i.callback(n)});i.id=function(e){return e.id};i.formatResultCssClass=function(e){return e.css}}else{if(!("query"in i)){if("ajax"in i){l=i.element.data("ajax-url");if(l&&l.length>0){i.ajax.url=l}i.query=x(i.ajax)}else if("data"in i){i.query=T(i.data)}else if("tags"in i){i.query=E(i.tags);if(i.createSearchChoice===t){i.createSearchChoice=function(e){return{id:e,text:e}}}i.initSelection=function(t,s){var n=[];e(d(t.val(),i.separator)).each(function(){var t=this,s=this,r=i.tags;if(e.isFunction(r))r=r();e(r).each(function(){if(u(this.id,t)){s=this.text;return false}});n.push({id:t,text:s})});s(n)}}}}if(typeof i.query!=="function"){throw"query function not defined for Select2 "+i.element.attr("id")}return i},monitorSource:function(){var e=this.opts.element,t;e.bind("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));t=this.bind(function(){var e=this.opts.element.attr("disabled")!=="disabled";var t=this.opts.element.attr("readonly")==="readonly";e=e&&!t;if(this.enabled!==e){if(e){this.enable()}else{this.disable()}}});e.bind("propertychange.select2 DOMAttrModified.select2",t);if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new WebKitMutationObserver(function(e){e.forEach(t)});this.propertyObserver.observe(e.get(0),{attributes:true,subtree:false})}},triggerChange:function(t){t=t||{};t=e.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},enable:function(){if(this.enabled)return;this.enabled=true;this.container.removeClass("select2-container-disabled");this.opts.element.removeAttr("disabled")},disable:function(){if(!this.enabled)return;this.close();this.enabled=false;this.container.addClass("select2-container-disabled");this.opts.element.attr("disabled","disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t=this.container.offset(),i=this.container.outerHeight(false),s=this.container.outerWidth(false),n=this.dropdown.outerHeight(false),r=e(window).scrollLeft()+document.documentElement.clientWidth,l=e(window).scrollTop()+document.documentElement.clientHeight,a=t.top+i,o=t.left,c=a+n<=l,h=t.top-n>=this.body().scrollTop(),u=this.dropdown.outerWidth(false),d=o+u<=r,f=this.dropdown.hasClass("select2-drop-above"),p,g,m;if(this.body().css("position")!=="static"){p=this.body().offset();a-=p.top;o-=p.left}if(f){g=true;if(!h&&c)g=false}else{g=false;if(!c&&h)g=true}if(!d){o=t.left+s-u}if(g){a=t.top-n;this.container.addClass("select2-drop-above");this.dropdown.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")}m=e.extend({top:a,left:o,width:s},k(this.opts.dropdownCss));this.dropdown.css(m)},shouldOpen:function(){var t;if(this.opened())return false;t=e.Event("open");this.opts.element.trigger(t);return!t.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return false;window.setTimeout(this.bind(this.opening),1);return true},opening:function(){var t=this.containerId,i="scroll."+t,s="resize."+t,n="orientationchange."+t,r;this.clearDropdownAlignmentPreference();if(this.search.val()===" "){this.search.val("")}this.container.addClass("select2-dropdown-open").addClass("select2-container-active");if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}this.updateResults(true);r=e("#select2-drop-mask");if(this.dropdown.prev()[0]!==r[0]){this.dropdown.before(r)}e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");r.css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});r.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();this.container.parents().add(window).each(function(){e(this).bind(s+" "+i+" "+n,function(t){e("#select2-drop-mask").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});e("#select2-drop").data("select2").positionDropdown()})});this.focusSearch()},close:function(){if(!this.opened())return;var t=this.containerId,i="scroll."+t,s="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(i).unbind(s).unbind(n)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger(e.Event("close"))},clearSearch:function(){},ensureHighlightVisible:function(){var t=this.results,i,s,n,r,l,a,o;s=this.highlight();if(s<0)return;if(s==0){t.scrollTop(0);return}i=this.findHighlightableChoices();n=e(i[s]);r=n.offset().top+n.outerHeight(true);if(s===i.length-1){o=t.find("li.select2-more-results");if(o.length>0){r=o.offset().top+o.outerHeight(true)}}l=t.offset().top+t.outerHeight(true);if(r>l){t.scrollTop(t.scrollTop()+(r-l))}a=n.offset().top-t.offset().top;if(a<0&&n.css("display")!="none"){t.scrollTop(t.scrollTop()+a)}},findHighlightableChoices:function(){var e=this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){var i=this.findHighlightableChoices(),s=this.highlight();while(s>-1&&s<i.length){s+=t;var n=e(i[s]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(t){var i=this.findHighlightableChoices();if(arguments.length===0){return h(i.filter(".select2-highlighted")[0],i.get())}if(t>=i.length)t=i.length-1;if(t<0)t=0;this.results.find(".select2-highlighted").removeClass("select2-highlighted");e(i[t]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else if(i.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i,s=-1,n=this.resultsPage+1,r=this,l=this.search.val(),a=this.context;if(t.length===0)return;i=t.offset().top-e.offset().top-e.height();if(i<=this.opts.loadMorePadding){t.addClass("select2-active");this.opts.query({term:l,page:n,context:a,matcher:this.opts.matcher,callback:this.bind(function(i){if(!r.opened())return;r.opts.populateResults.call(this,e,i.results,{term:l,page:n,context:a});if(i.more===true){t.detach().appendTo(e).text(r.opts.formatLoadMore(n+1));window.setTimeout(function(){r.loadMoreIfNeeded()},10)}else{t.remove()}r.positionDropdown();r.resultsPage=n})})}},tokenize:function(){},updateResults:function(i){var s=this.search,n=this.results,r=this.opts,l,a=this,o;if(i!==true&&(this.showSearchInput===false||!this.opened())){return}s.addClass("select2-active");function c(){n.scrollTop(0);s.removeClass("select2-active");a.positionDropdown()}function h(e){n.html(e);c()}var d=e.isFunction(r.maximumSelectionSize)?r.maximumSelectionSize():r.maximumSelectionSize;if(d>=1){l=this.data();if(e.isArray(l)&&l.length>=d&&P(r.formatSelectionTooBig,"formatSelectionTooBig")){h("<li class='select2-selection-limit'>"+r.formatSelectionTooBig(d)+"</li>");return}}if(s.val().length<r.minimumInputLength){if(P(r.formatInputTooShort,"formatInputTooShort")){h("<li class='select2-no-results'>"+r.formatInputTooShort(s.val(),r.minimumInputLength)+"</li>")}else{h("")}return}else if(r.formatSearching()&&i===true){h("<li class='select2-searching'>"+r.formatSearching()+"</li>")}if(r.maximumInputLength&&s.val().length>r.maximumInputLength){if(P(r.formatInputTooLong,"formatInputTooLong")){h("<li class='select2-no-results'>"+r.formatInputTooLong(s.val(),r.maximumInputLength)+"</li>")}else{h("")}return}o=this.tokenize();if(o!=t&&o!=null){s.val(o)}this.resultsPage=1;r.query({term:s.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(l){var o;if(!this.opened())return;this.context=l.context===t?null:l.context;if(this.opts.createSearchChoice&&s.val()!==""){o=this.opts.createSearchChoice.call(null,s.val(),l.results);if(o!==t&&o!==null&&a.id(o)!==t&&a.id(o)!==null){if(e(l.results).filter(function(){return u(a.id(this),a.id(o))}).length===0){l.results.unshift(o)}}}if(l.results.length===0&&P(r.formatNoMatches,"formatNoMatches")){h("<li class='select2-no-results'>"+r.formatNoMatches(s.val())+"</li>");return}n.empty();a.opts.populateResults.call(this,n,l.results,{term:s.val(),page:this.resultsPage,context:null});if(l.more===true&&P(r.formatLoadMore,"formatLoadMore")){n.append("<li class='select2-more-results'>"+a.opts.escapeMarkup(r.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){a.loadMoreIfNeeded()},10)}this.postprocessResults(l,i);c()})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur)this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.opts.element.triggerHandler("blur")},focusSearch:function(){this.search.show();this.search.focus();window.setTimeout(this.bind(function(){this.search.show();this.search.focus();this.search.val(this.search.val())}),10)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),s=i.closest(".select2-result").data("select2-data");if(s){this.highlight(t);this.onSelect(s,e)}},getPlaceholder:function(){if(this.select){if(this.select.find("option").first().text()!==""){return t}}return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,s,n,r,l;if(this.opts.width==="off"){return null}else if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else if(this.opts.width==="copy"||this.opts.width==="resolve"){i=this.opts.element.attr("style");if(i!==t){s=i.split(";");for(r=0,l=s.length;r<l;r=r+1){n=s[r].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(n!==null&&n.length>=1)return n[1]}}if(this.opts.width==="resolve"){i=this.opts.element.css("width");if(i.indexOf("%")>0)return i;return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}return null}else if(e.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}var s=i.call(this);if(s!==null){this.container.attr("style","width: "+s)}}});n=A(s,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["    <a href='javascript:void(0)' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments);this.selection.attr("tabIndex","-1");this.search.attr("tabIndex","-1")},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments);if(this.elementTabIndex){this.selection.attr("tabIndex",this.elementTabIndex)}else{this.selection.removeAttr("tabIndex")}this.search.removeAttr("tabIndex")},opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen")},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show()},focus:function(){this.close();this.selection.focus();this.opts.element.triggerHandler("focus")},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var e,t=this.container,s=this.dropdown,n=false;this.selection=e=t.find(".select2-choice");this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===i.PAGE_UP||e.which===i.PAGE_DOWN){w(e);return}if(this.opened()){switch(e.which){case i.UP:case i.DOWN:this.moveHighlight(e.which===i.UP?-1:1);w(e);return;case i.TAB:case i.ENTER:this.selectHighlighted();w(e);return;case i.ESC:this.cancel(e);w(e);return}}else{if(e.which===i.TAB||i.isControl(e)||i.isFunctionKey(e)||e.which===i.ESC){return}if(this.opts.openOnEnter===false&&e.which===i.ENTER){return}this.open();if(e.which===i.ENTER){return}}}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")}));this.search.bind("blur",this.bind(function(){if(!this.opened())this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){var e=this.elementTabIndex||0;if(e){this.selection.attr("tabIndex",e)}else{this.selection.removeAttr("tabIndex")}}),10)}));e.delegate("abbr","mousedown",this.bind(function(e){if(!this.enabled)return;this.clear();C(e);this.close();this.triggerChange();this.selection.focus()}));e.bind("mousedown",this.bind(function(e){n=true;if(this.opened()){this.close();this.selection.focus()}else if(this.enabled){this.open()}n=false}));s.bind("mousedown",this.bind(function(){this.search.focus()}));e.bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1")}));e.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active")}window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.elementTabIndex||0)}),10)}));e.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which==i.DOWN||e.which==i.UP||e.which==i.ENTER&&this.opts.openOnEnter){this.open();w(e);return}if(e.which==i.DELETE||e.which==i.BACKSPACE){if(this.opts.allowClear){this.clear()}w(e);return}}));e.bind("keypress",this.bind(function(e){if(e.which==i.DELETE||e.which==i.BACKSPACE||e.which==i.TAB||e.which==i.ENTER||e.which==0){return}var t=String.fromCharCode(e.which);this.search.val(t);this.open()}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.close();this.setPlaceholder()}else{var i=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.setPlaceholder()}})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(t,i){var s=t.find(":selected");if(e.isFunction(i))i({id:s.attr("value"),text:s.text(),element:s})}}else if("data"in t){t.initSelection=t.initSelection||function(i,s){var n=i.val();t.query({matcher:function(e,i,s){return u(n,t.id(s))},callback:!e.isFunction(s)?e.noop:function(e){s(e.results.length?e.results[0]:null)}})}}return t},setPlaceholder:function(){var e=this.getPlaceholder();if(this.opts.element.val()===""&&e!==t){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup(e));this.selection.addClass("select2-default");this.selection.find("abbr").hide()}},postprocessResults:function(t,i){var s=0,n=this,r=true;this.findHighlightableChoices().each2(function(e,t){if(u(n.id(t.data("select2-data")),n.opts.element.val())){s=e;return false}});this.highlight(s);if(i===true){r=this.showSearchInput=I(t.results)>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[r?"removeClass":"addClass"]("select2-search-hidden");e(this.dropdown,this.container)[r?"addClass":"removeClass"]("select2-with-searchbox")}},onSelect:function(e,t){var i=this.opts.element.val();this.opts.element.val(this.id(e));this.updateSelection(e);this.close();if(!t||!t.noFocus)this.selection.focus();if(!u(i,this.id(e))){this.triggerChange()}},updateSelection:function(e){var i=this.selection.find("span"),s;this.selection.data("select2-data",e);i.empty();s=this.opts.formatSelection(e,i);if(s!==t){i.append(this.opts.escapeMarkup(s))}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==t){this.selection.find("abbr").show()}},val:function(){var e,i=false,s=null,n=this;if(arguments.length===0){return this.opts.element.val()}e=arguments[0];if(arguments.length>1){i=arguments[1]}if(this.select){this.select.val(e).find(":selected").each2(function(e,t){s={id:t.attr("value"),text:t.text()};return false});this.updateSelection(s);this.setPlaceholder();if(i){this.triggerChange()}}else{if(this.opts.initSelection===t){throw new Error("cannot call val() if initSelection() is not defined")}if(!e&&e!==0){this.clear();if(i){this.triggerChange()}return}this.opts.element.val(e);this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(!e?"":n.id(e));n.updateSelection(e);n.setPlaceholder();n.triggerChange()})}},clearSearch:function(){this.search.val("")},data:function(e){var i;if(arguments.length===0){i=this.selection.data("select2-data");if(i==t)i=null;return i}else{if(!e||e===""){this.clear()}else{this.opts.element.val(!e?"":this.id(e));this.updateSelection(e)}}}});r=A(s,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(t,i){var s=[];t.find(":selected").each2(function(e,t){s.push({id:t.attr("value"),text:t.text(),element:t})});if(e.isFunction(i))i(s)}}else if("data"in t){t.initSelection=t.initSelection||function(i,s){var n=d(i.val(),t.separator);t.query({matcher:function(i,s,r){return e.grep(n,function(e){return u(e,t.id(r))}).length},callback:!e.isFunction(s)?e.noop:function(e){s(e.results)}})}}return t},initContainer:function(){var t=".select2-choices",s;this.searchContainer=this.container.find(".select2-search-field");this.selection=s=this.container.find(t);this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===i.BACKSPACE&&this.search.val()===""){this.close();var t,n=s.find(".select2-search-choice-focus");if(n.length>0){this.unselect(n.first());this.search.width(10);w(e);return}t=s.find(".select2-search-choice:not(.select2-locked)");if(t.length>0){t.last().addClass("select2-search-choice-focus")}}else{s.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(e.which){case i.UP:case i.DOWN:this.moveHighlight(e.which===i.UP?-1:1);w(e);return;case i.ENTER:case i.TAB:this.selectHighlighted();w(e);return;case i.ESC:this.cancel(e);w(e);return}}if(e.which===i.TAB||i.isControl(e)||i.isFunctionKey(e)||e.which===i.BACKSPACE||e.which===i.ESC){return}if(this.opts.openOnEnter===false&&e.which===i.ENTER){return}this.open();if(e.which===i.PAGE_UP||e.which===i.PAGE_DOWN){w(e)}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");if(!this.opened())this.clearSearch();e.stopImmediatePropagation()}));this.container.delegate(t,"mousedown",this.bind(function(t){if(!this.enabled)return;if(e(t.target).closest(".select2-search-choice").length>0){return}this.clearPlaceholder();this.open();this.focusSearch();t.preventDefault()}));this.container.delegate(t,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.clearSearch()},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled")},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments);this.search.attr("disabled",true)},initSelection:function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var i=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.clearSearch()
}})}},clearSearch:function(){var e=this.getPlaceholder();if(e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(e).addClass("select2-default");this.resizeSearch()}else{this.search.val(" ").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}else{if(this.search.val()===" ")this.search.val("")}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus();this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],s=[],n=this;e(t).each(function(){if(h(n.id(this),i)<0){i.push(n.id(this));s.push(this)}});t=s;this.selection.find(".select2-search-choice").remove();e(t).each(function(){n.addSelectedChoice(this)});n.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts);if(e!=null&&e!=t){this.search.val(e);if(e.length>0){this.open()}}},onSelect:function(e,t){this.addSelectedChoice(e);if(this.select||!this.opts.closeOnSelect)this.postprocessResults();if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();this.positionDropdown()}else{this.close()}}this.triggerChange({added:e});if(!t||!t.noFocus)this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(i){var s=!i.locked,n=e("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),r=e("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>");var l=s?n:r,a=this.id(i),o=this.getVal(),c;c=this.opts.formatSelection(i,l.find("div"));if(c!=t){l.find("div").replaceWith("<div>"+this.opts.escapeMarkup(c)+"</div>")}if(s){l.find(".select2-search-choice-close").bind("mousedown",w).bind("click dblclick",this.bind(function(t){if(!this.enabled)return;e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();w(t)})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}l.data("select2-data",i);l.insertBefore(this.searchContainer);o.push(a);this.setVal(o)},unselect:function(e){var t=this.getVal(),i,s;e=e.closest(".select2-search-choice");if(e.length===0){throw"Invalid argument: "+e+". Must be .select2-search-choice"}i=e.data("select2-data");if(!i){return}s=h(this.id(i),t);if(s>=0){t.splice(s,1);this.setVal(t);if(this.select)this.postprocessResults()}e.remove();this.triggerChange({removed:i})},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),s=this;t.each2(function(t,i){var n=s.id(i.data("select2-data"));if(h(n,e)>=0){i.addClass("select2-selected");i.find(".select2-result-selectable").addClass("select2-selected")}});i.each2(function(e,t){if(!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0){t.addClass("select2-selected")}});if(this.highlight()==-1){s.highlight(0)}},resizeSearch:function(){var e,t,i,s,n,r=f(this.search);e=S(this.search)+10;t=this.search.offset().left;i=this.selection.width();s=this.selection.offset().left;n=i-(t-s)-r;if(n<e){n=i-r}if(n<40){n=i-r}if(n<=0){n=e}this.search.width(n)},getVal:function(){var e;if(this.select){e=this.select.val();return e===null?[]:e}else{e=this.opts.element.val();return d(e,this.opts.separator)}},setVal:function(t){var i;if(this.select){this.select.val(t)}else{i=[];e(t).each(function(){if(h(this,i)<0)i.push(this)});this.opts.element.val(i.length===0?"":i.join(this.opts.separator))}},val:function(){var i,s=false,n=[],r=this;if(arguments.length===0){return this.getVal()}i=arguments[0];if(arguments.length>1){s=arguments[1]}if(!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(s){this.triggerChange()}return}this.setVal(i);if(this.select){this.select.find(":selected").each(function(){n.push({id:e(this).attr("value"),text:e(this).text()})});this.updateSelection(n);if(s){this.triggerChange()}}else{if(this.opts.initSelection===t){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(t){var i=e(t).map(r.id);r.setVal(i);r.updateSelection(t);r.clearSearch();if(s){r.triggerChange()}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t){var i=this,s;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get()}else{if(!t){t=[]}s=e.map(t,function(e){return i.opts.id(e)});this.setVal(s);this.updateSelection(t);this.clearSearch()}}});e.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),s,l,a,o,c=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(i.length===0||typeof i[0]==="object"){s=i.length===0?{}:e.extend({},i[0]);s.element=e(this);if(s.element.get(0).tagName.toLowerCase()==="select"){o=s.element.attr("multiple")}else{o=s.multiple||false;if("tags"in s){s.multiple=o=true}}l=o?new r:new n;l.init(s)}else if(typeof i[0]==="string"){if(h(i[0],c)<0){throw"Unknown method: "+i[0]}a=t;l=e(this).data("select2");if(l===t)return;if(i[0]==="container"){a=l.container}else{a=l[i[0]].apply(l,i.slice(1))}if(a!==t){return false}}else{throw"Invalid arguments to select2 plugin: "+i}});return a===t?this:a};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,s){var n=[];y(e.text,i.term,n,s);return n.join("")},formatSelection:function(e,i){return e?e.text:t},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(i==1?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please enter "+i+" less character"+(i==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:O,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(e).replace(/[&<>"'/\\]/g,function(e){return t[e[0]]})},blurOnChange:false,selectOnBlur:false};window.Select2={query:{ajax:x,local:T,tags:E},util:{debounce:m,markMatch:y},"class":{"abstract":s,single:n,multi:r}}})(jQuery);